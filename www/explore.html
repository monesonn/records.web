<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Платівки</title>
    <link rel="icon" type="image/ico" href="/favicon/vinyl.ico" />
    <link
      href="https://fonts.googleapis.com/css?family=Comfortaa|Open+Sans"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/theme/default.css">
    <link rel="stylesheet" href="/css/explore.css" type="text/css" media="all" />
    <link rel="stylesheet" href="/css/input-boxes.css" type="text/css" media="all" />
  </head>
  <body>
    <div id="app">
      <div class="menu">
        <div class="abs-center">
            <div v-if="lsPageToggle">
                <login-comp>
                </login-comp>
            </div>
            <div v-else>
                <signup-comp>
                </signup-comp>
            </div>
        </div>
      </div>
            <div :class="['profile', loginStatus?'active':'']">
            <div class="abs-center">
            <div class="avatar-upload">
            <div class="avatar-edit">
                <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" />
                <label for="imageUpload"></label>
            </div>
            <div class="avatar-preview">
                <div id="imagePreview" style="background-image: url(https://i.pravatar.cc/500?img=68);">
            </div>
            </div>
            <br></br>
            <h2>Профіль</h2>
            <h4>Ім'я: {{ profile.fname }}<h4>
            <h4>Прізвище: {{ profile.lname }}<h4>
            <button @click="signOut()" class="btn btn-outline-danger" style="width:200px;">Вийти</button>
            </div>
        </div>
      </div>
      <div :class="['rela-block', 'page-container', menuOpen?'shifted':'']">
        <div :class="['rela-block', 'nav-bar']">
          <div class="rela-block gutter-container inner-nav-container">
            <div :class="['nav-flip', 'top', searchOpen?'active':'']">
              <div class="abs-center logo link">платівки.ua</div>
              <div
                :class="['left', 'ui-icon', 'menu-button', menuOpen?'active':'']"
                  @click="menuOpen = !menuOpen; cartOpen = false; filterOpen = false;"
              >
                <svg viewbox="0 0 40 50" class="button-svg">
                  <path d="M 7 15 L 33 15" />
                  <path d="M 7 25 L 33 25" />
                  <path d="M 7 35 L 33 35" />
                </svg>
              </div>
              <div
                :class="['right', 'ui-icon', 'cart-button', cartOpen?'active':'']"
                @click="cartOpen = !cartOpen; menuOpen = false; filterOpen = false;"
              >
                <svg viewbox="0 0 50 50" class="button-svg">
                  <path d="M 4 8 L 9 8 L 16 33 L 39 33 L 44 13 L 17 13" />
                  <circle cx="19" cy="41" r="3" />
                  <circle cx="37" cy="41" r="3" />
                </svg>
                  <span v-if="cartIsEmpty === false" class='cart-qty'>{{cart.length}}</span>
              </div>
            </div>
            <div :class="['nav-flip', 'bottom', searchOpen?'active':'']">
              <input
                v-model="searchInput"
                type="text"
                placeholder="Шукати тут ..."
                class="search-bar"
              />
            </div>
            <div
              :class="['vert-center', 'ui-icon', 'search-button']"
                @click="searchOpen = !searchOpen; cartOpen = false; filterOpen = false;"
            >
              <svg viewbox="0 0 50 50" class="button-svg">
                <circle cx="20" cy="22" r="12" />
                <path d="M 31 32 L 39 40" />
              </svg>
            </div>
          </div>
        </div>
        <div :class="['cart', cartOpen?'active':'']">
            <div class="abs-center">
                <div v-if="cart.length === 0">
                    <md-icon class="md-size-4x" style="right:50%;transform: translateX(50%)">add_shopping_cart</md-icon>
                    <br></br>
                    <h4>Це ваш кошик</h4>
                    <p>Але здається він порожній. <i class="bi bi-emoji-wink"></i></p>
                </div>
                <div v-else>
                <h2 style="left:50%; text-align:center;">Кошик</h2>
                <br></br>
                <div v-for="(item,index) in cart" class="cart-item-container">
                     <div
              class="cart-pic"
              :style="{'background': 'url(\''+item.img+'\') no-repeat'}"
            ></div>
                    <div class="row" style="text-align: center">
                        <i class="bi bi-dash-circle qty-minus" @click="decrementQty(index);"></i>
                        <i>{{ item.qty }}</i>
                        <i class="bi bi-plus-circle qty-plus" @click="incrementQty(index);"></i>
                    </div>
                    {{ item.artist }} - {{ item.name }}
                </div>
                <br></br>
                <div v-if="cartIsEmpty === false">
                <h4 class="bottom" style="text-align:center"> Усього: {{total}}₴</h4>
                <button @click="checkoutOpen = !checkoutOpen; cartOpen = false" class="btn btn-outline-success" style="width:175px;">Оформити замовлення</button>
                </div>
                </div>
            </div>
        </div>
        <div :class="['checkout-container', checkoutOpen?'active':'']">
            <div class="rela-block gutter-container">
                <div class="rela-block section-nav">
                    <h2 class="left">Ваше замовлення</h2>
                    <div
                        class="rela-inline right close-button"
                        @click="checkoutOpen = false; cartOpen = false"
                    >
                    <svg viewbox="0 0 30 30" class="button-svg">
                    <path d="M 8 8 L 22 22" />
                    <path d="M 22 8 L 8 22" />
                    </svg>
                </div>
                <br></br>
                <div class="left">
                    <div v-for="(item, index) in cart" class="rela-block">
                        <h2 style="font-size:16px">{{ index+1 }}. {{ item.artist }} - {{ item.name }}</h2>
                    </div>
                </div>
            </div>
            </div>
            <h2 style="bottom: 5%; right: 5%; position: absolute;">Усього: {{ total }}</h2>
        </div>
        <div class="rela-block page-section top-section">
          <div class="gutter-container">
            <div class="rela-block section-nav">
              <h2 class="left">Вітрина нового товару</h2>
            </div>
            <div class="rela-block new-item-container">
              <div
                :class="['vert-center', 'move-arrow', 'left-arrow', newItemPos<=0?'disabled':'']"
                @click="updateNewItemPos(-1)"
              >
                <
              </div>
              <div
                :class="['vert-center', 'move-arrow', 'right-arrow', newItemPos>=(newItems.length-1)?'disabled':'']"
                @click="updateNewItemPos(1)"
              >
                >
              </div>
              <div
                class="inner-moving-container"
                :style="{'left': ((newItemPos * -320)+1)+'px'}"
              >
                <div
                  v-for="(ni,index) in newItems"
                  class="rela-inline new-item"
                  :style="{'background': 'url(\''+ni.img+'\') center no-repeat', 'animation-delay': (index*0.1)+'s'}"
                >
                  <div class="new-item-info" @click="viewProduct(ni.id)">
                    <p class="abs-center">{{ ni.name }}<br />{{ ni.artist }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="rela-block page-section grey product-section">
          <div class="rela-block gutter-container">
            <div class="rela-block section-nav">
              <h2 class="left">
                  Усі звукозаписи<span v-show="currentGenre !== 'Усі'"
                  >/{{ currentGenre }}</span
                >
              </h2>
              <md-button class="right md-icon-button" @click="filterOpen = !filterOpen; menuOpen = false; searchOpen = false; cartOpen = false;">
                      <md-icon class="right">view_list</md-icon>
              </md-button>
            </div>
            <div class="rela-block product-item-container">
              <product-comp
                v-for="(item,index) in displayedProducts"
                :info="item"
              ></product-comp>
            </div>
            <div
              v-show="this.displayPos < this.filteredProducts.length"
              class="rela-block load-button"
            >
              <div
                class="rela-inline load-button-container"
                @click="addDisplayedProducts"
              >
              <p>Завантажити ще?</p>
                <svg viewbox="0 0 50 50" class="button-svg">
                  <path />
                </svg>
              </div>
            </div>
          </div>
        </div>
        <div :class="['cart', filterOpen?'active':'']">
            <div class="abs-center">
              <h2>Фільтр</h2>
              <br></br>
              <md-autocomplete class="md-size-xsmall" v-model="currentGenre" :md-options="genre">
                  <label>Жанр</label>
              </md-autocomplete>
              <md-field>
                <label for="age">Рік</label>
                <md-input type="number" autocomplete="age" v-model="currentYear"/>
              </md-field>
              <md-autocomplete class="md-size-xsmall" v-model="currentCountry" :md-options="genre">
                  <label>Країна</label>
              </md-autocomplete>
              <md-autocomplete class="md-size-xsmall" v-model="currentLabel" :md-options="genre">
                  <label>Лейбл</label>
              </md-autocomplete>
            </div>
        </div>
        <div class="rela-block page-section new-section">
          <div class="rela-block gutter-container">
            <div class="rela-block section-nav">
              <h2 class="left">Щось круте тут</h2>
            </div>
          </div>
        </div>
        <div class="rela-block footer">
          <div class="rela-block gutter-container inner-footer-container">
              <div class="logo"><i class="bi bi-music-note-beamed"></i></div>
          </div>
        </div>
      </div>

      <div :class="['product-view-container', productViewOpen?'active':'']">
        <div class="rela-block gutter-container">
          <div class="rela-block section-nav">
            <h2 class="left">Огляд товару</h2>
            <div
              class="rela-inline right close-button"
              @click="productViewOpen = false"
            >
              <svg viewbox="0 0 30 30" class="button-svg">
                <path d="M 8 8 L 22 22" />
                <path d="M 22 8 L 8 22" />
              </svg>
            </div>
          </div>
          <div class="rela-block pv-container">
            <div
              class="rela-block pv-pic"
              :style="{'background': 'url(\''+viewedProduct.img+'\') center no-repeat'}"
            ></div>
          </div>
          <div class="rela-block pv-container">
            <div class="rela-block pv-info">
              <h2 class="rela-block">{{ viewedProduct.name }}</h2>
              <h3 class="rela-block">{{ viewedProduct.artist }}</h3>
              <div class="rela-block info-row">
                <div class="rela-inline left">Дата випуску:</div>
                <div
                  class="rela-block text"
                  v-html="viewedProduct.date||'Немає дати випуску'"
                ></div>
              </div>
              <div class="rela-block info-row">
                <div class="rela-inline left">Жанр:</div>
                <div
                  class="rela-block text"
                  v-html="viewedProduct.genre||'Немає жанру'"
                ></div>
              </div>
              <div class="rela-block info-row">
                <div class="rela-inline left">Опис:</div>
                <div
                  class="rela-block text"
                  v-html="viewedProduct.desc||'Немає опису'"
                ></div>
              </div>
              <div class="rela-block info-row">
                <div class="rela-inline left">Рейтинг:</div>
                <div
                  class="rela-block text"
                  v-html="viewedProduct.rate||'Немає рейтингу'"
                ></div>
              </div>
            </div>
          </div>
          <div class="rela-block pv-container">
              <h2>Коментарі</h2>
              <div v-if="loginStatus === true">
                  <h4>Ваш коментар</h4>
                  <md-field>
                      <label>Textarea</label>
                      <md-textarea v-model="textarea"></md-textarea>
                 </md-field>
                 <button @click="addComment()" class="btn btn-outline-success right" style="width:200px; margin-top: -1.5%">Додати <i class="bi bi-chat-dots"></i></button>
             </div>
              <comment-comp v-for="(item,index) in comments" :info="item">
              </comment-comp>
          </div>
          <div class="rela-block pv-container">
            <h2>Пов’язані товари</h2>
            <div class="rela-block pv-related-container">
            <!--   Other {{ viewedProduct.genre }} products here -->
            </div>
            <div
                v-for="c in genre"
                :class="['rela-inline', 'category', currentGenre===c?'active':'']"
                @click="currentGenre = c; updateFilteredProducts()"
             >
            </div>
            <div class="rela-block product-item-container">
              <product-comp
                v-for="(item,index) in displayedProducts"
                :info="item"
              ></product-comp>
            </div>
            <div
              v-show="this.displayPos < this.filteredProducts.length"
              class="rela-block load-button"
            >
              <div
                class="rela-inline load-button-container"
                @click="addDisplayedProducts"
              >
              <p>Завантажити ще?</p>
                <svg viewbox="0 0 50 50" class="button-svg">
                  <path />
                </svg>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" charset="utf-8"></script>
    <script charset="utf-8">
        function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
            $('#imagePreview').css('background-image', 'url('+e.target.result +')');
            $('#imagePreview').hide();
            $('#imagePreview').fadeIn(650);
        }
        reader.readAsDataURL(input.files[0]);
    }
}
$("#imageUpload").change(function() {
    readURL(this);
});
    </script>
    <script>
        const products = [[.product]]
    </script>
    <script src="/js/material_input.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/js/libraries/vuelidate/dist/vuelidate.min.js"></script>
    <script src="/js/libraries/vuelidate/dist/validators.min.js"></script>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vue-material"></script>
    <script src="/js/explore.js"></script>
  </body>
</html>
